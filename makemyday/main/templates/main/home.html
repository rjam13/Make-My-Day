{% extends 'main/base.html' %} 
{% load static %} 

{% block scripts %}
<script src="{% static 'main/home.js' %}" defer></script>
{% endblock scripts %}

{% block title %}
Home
{% endblock %} 

{% block loggedin %}
<div class="row">
    <section class="col-8 p-4">
        <div class="row" style = "position:relative; left:25px; margin-right:20px">
            <div class="col-sm-3" style ="margin-top:50px">
                <div class="card shadow" style="width: 13rem">
                    <div class="card-body">
                        <h5 class="card-title">New Course</h5>
                        <p class="card-text">
                            If you have an access code that you received from
                            your instructor, enter it here.
                        </p>
                        <div class="d-grid gap-2">
                            <a href="#" class="btn btn-primary">Register</a>
                        </div>
                    </div>
                </div>
            </div>
            {% if courses %} 
            {% for each in courses %}
            <div class="col-sm-3" style = "position:relative; margin-top:50px" >
                <div class="card shadow" style="width: 12rem" >
                    <img
                        src="../../static/cardImage.jpg"
                        class="card-img-top"
                        alt="..."
                        style="width: 100%"
                    />
                    <div class="card-body"style="min-height:200px; position:relative" >
                        <h5 class="card-title">{{ each.course_id }}</h5>
                        <h6 class="card-title">{{ each.course_name }}</h6>
                        <p class="card-text">{{ each.instructors }}</p>
                        <div class="d-grid gap-2" style="margin-bottom:50px">
                            <a
                                href="{% url 'course:each_courses' each.course_id %}"
                                class="btn btn-primary"
                                >Go To Course
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %} 
            {% endif %}
            <!-- STUDENT'S NEW COURSE CARD -->
            {% if request.user.userprofile.student_id != "" %} 
            <div class="col-sm-3">
                <div class="card shadow" style="width: 13rem">
                    <div class="card-body">
                        <h5 class="card-title">New Course</h5>
                        <p class="card-text">
                            If you have an access code that you received from
                            your instructor, enter it here.
                        </p>
                        <form id="cr-form">
                            {% csrf_token %}
                            <input type="text" id="cr-code" name="cr-code" placeholder="E.g. specialturtle23" style="width : 100%;" required>
                            <div class="d-grid gap-2 mt-2">
                                <button type="submit" id="cr-button" class="btn btn-primary">Register</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            {% endif %}
            <!-- INSTRUCTOR'S CREATE COURSE CARD -->
            {% if request.user.userprofile.instructor_id != "" %} 
            <div class="col-sm-3">
                <div class="card shadow" style="width: 13rem">
                    <div class="card-body">
                        <h5 class="card-title">Create Course</h5>
                        <p class="card-text">
                            Press here to create a new course.
                        </p>
                        <div class="d-grid gap-2 mt-2">
                            <a href="{% url 'course:course_create' %}" class="btn btn-primary">Create</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </section>
    {% if request.user.userprofile.student_id != "" %}
    <section class="col p-3">
        <h3 class="text-info">To-Do List</h3>
        {% for qb in open_aqbs %}
        <hr />
        <a
            href="{% url 'course:questions:qb-view' pk=qb.question_bank.course.course_id id=qb.question_bank.question_bank_id %}"
        >
        <b>{{ qb.question_bank.course }}:</b> {{ qb.question_bank.topic }}
        </a>
        <p class="mb-0">{{ qb.question_bank.frequency }} | Set reminder: {{ qb.time_to_send }}</p>
        <p><b>Score: {{ qb.score }}</b></p>
        {% endfor %} 

        {% if upcoming_aqbs %} 
        <h5>Upcoming</h5>
        {% for qb in upcoming_aqbs %}
        <hr />
        <a>
        <b>{{ qb.question_bank.course }}:</b> {{ qb.question_bank.topic }}
        </a>
        <p>{{ qb.question_bank.frequency }} | Set reminder: {{ qb.time_to_send }}</p>
        {% endfor %} 
        {% endif %}

        {% if closed_aqbs %} 
        <h5 class="text-muted" >Closed</h5>
        {% for qb in closed_aqbs %}
        <hr />
        <a>
        <b>{{ qb.question_bank.course }}:</b> {{ qb.question_bank.topic }}
        </a>
        <p><b>Score: {{ qb.score }}</b></p>
        {% endfor %} 
        {% endif %}
    </section>
    {% endif %}
</div>
{% endblock %} 
{% block notloggin %}
<header
    class="py-5 bg-image-full"
    style="background-image: url('../../static/cardImage.jpg')"
>
    <div class="text-center my-5">
        <h1 class="text-white fs-3 fw-bolder">Test Landing Page</h1>
        <p class="text-white-50 mb-0">Landing Page</p>
    </div>
</header>
<section class="bg-light text-center">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <div class="mx-auto mb-5 mb-lg-0 mb-lg-3">
                    <h3>More Info 1</h3>
                    <p class="lead mb-0">
                        This is where there will be more info 1!
                    </p>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="mx-auto mb-5 mb-lg-0 mb-lg-3">
                    <h3>More Info 1</h3>
                    <p class="lead mb-0">
                        This is where there will be more info 1!
                    </p>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="mx-auto mb-5 mb-lg-0 mb-lg-3">
                    <h3>More Info 1</h3>
                    <p class="lead mb-0">
                        This is where there will be more info 1!
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
